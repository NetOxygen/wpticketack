{"version":3,"sources":["app/Program/FilterRows.js"],"names":["e","a","define","dependencies","click","$filters","criterium","$","data","prototype","toString","call","Object","attach","handle_click","init","$filter","criteria","value","M","sync_ui","t","s","update_state","each","console","_this2","h","valueOf","not","c","va","target","hide","utc","empty","Filter","unusedInput","overflow","nullInput","filters","invalidMonth","userInvalidated","parsedDateParts","map","meridiem","rfc2822","weekdayMismatch","_pf","y","n","detach","_d","getTime","invalidWeekday","invalidFormat","_strict","charsLeftOver","unusedTokens","length","bigHour","isFrozen"],"mappings":"CAAA,SAAAA,EAAAC,GAyC0CC,iJAzC1C,mDAuC6B,OAKbC,EAAAA,MAAAA,KAAcC,WALD,SAORC,EAAAA,GAAwB,OAEzBC,aAAeC,OAAKC,mBAALD,OAFUE,UAPhBC,SAAAC,KAAAX,GAAA,SAWTK,EAAAA,GANgB,OAAA,MAAAL,GAAA,oBAAAY,OAAAH,UAAAC,SAAAC,KAAAX,GALP,SALFa,EAAAA,GAAA,YAuBfC,IAvBed,EAKE,SAoB6Be,EACtCC,GAAUA,MAAAA,iBAAAA,GAAAA,oBAAAA,OAAAA,UAAAA,SAAAA,KAAAA,GAAAA,SAEVC,EAAAA,GAAwB,OAAAjB,aACbgB,MAAXE,kBADwBN,OAAAH,UAAAC,SAAAC,KAAAX,GAFdgB,SAOdG,EAAAnB,EAAKoB,GAVkB,IAAAC,EAAAC,EAAA,GAAA,IAUvBD,EAPcL,EAAAA,EAAAA,EAAAA,SAAAA,EAUlBO,EAAAA,KAAAA,EAAAA,EAAAA,GAAcC,IAAUP,OAAAA,EAAAA,SAAAA,EAAAA,EAIfQ,GAJeR,OAAAA,OAIJC,UAAAQ,eAAAA,KAAAA,EAAAA,GAJIT,SAAAA,EAAAA,EAMfX,GAAAA,IAAAA,IAAAA,KACKY,EAPUD,EAAxBM,EAVkBP,KAAAA,EAAAA,GAAAA,EAAAA,IAAAA,OArBDW,EAAA1B,EAAA,cAAAD,EAAAU,SAAAT,EAAAS,UAAAiB,EAAA1B,EAAA,aAAAD,EAAA4B,QAAA3B,EAAA2B,SAAA5B,EA2CU6B,SARPC,EAAA9B,EAAAgB,EAAAA,EAAAA,GAQOa,OAIrBE,GAAKC,EAAAA,EAAQC,EAAAA,GAARD,GAZSE,MAAA,SAQOL,EAAAA,GAAAA,OAQnB,MAAAZ,EAAAA,MAAAD,EAAWR,IAAA,CAxDJ2B,OAAAjB,EA6DZkB,aAxEyBb,GA4CxBc,YAAA,GA5BaC,UAAA,EA+BjBf,cAAc,EACVgB,WAAWC,EAhCEC,aAAA,KAmCjBrB,eAASA,EAAWsB,iBAAA,EAChBnC,KAAE,EACFoC,gBAAeC,GAAkBC,SACvB3B,KADuB4B,SAE3B,EAF2BC,iBAG3B,IAH2B/C,EAAAgD,IAAA,SAAjCC,EAFgBjD,GAAA,GAYhBO,MAAOyB,EAAAA,SAAPzB,CACAA,IAAEN,EAAK+B,EAAAA,GAALX,EAAc6B,EAAAvC,KAAAV,EAAhBM,gBAbgB,SAAAP,GAnCH,OAAA,MAAAA,IAmDTsB,GAAA6B,MAAAnD,EAAAoD,GAAWC,YAAApD,EAAAqC,SAAA,IAAArC,EAAAkC,QAAAlC,EAAAwC,eAAAxC,EAAAqD,iBAAArD,EAAA8C,kBAAA9C,EAAAsC,YAAAtC,EAAAsD,gBAAAtD,EAAAyC,mBAAAzC,EAAA4C,UAAA5C,EAAA4C,UAAAxB,GAnDF,GAAArB,EAAAwD,UAAAlC,EAAAA,GAAA,IAAArB,EAAAwD,eAAA,IAAAxD,EAAAyD,aAAAC,aAAA,IAAA1D,EAAA2D,SAAA,MAAAhD,OAAAiD,UAAAjD,OAAAiD,SAAA7D,GAKO,OAAAsB,EAmDrBc,EAAAA,SAnDqBd","file":"app.js","sourcesContent":["/**\n * Handle program filters\n *\n * Usage:\n *\n * <div\n *    <!-- Required -->\n *    data-component=\"Program/Filter\"\n *    data-criterium=\"date,section,...\"\n *\n *    <!-- Optional -->\n *    data-class=\"tkt_program_event\"\n * >\n *   <ul>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *   </ul>\n * </div>\n */\ndefine(\n    ['postal', 'jquery', 'lodash', 'bootstrap'],\n    function dependencies(postal, $, _) {\n\n        function Filter($container, state) {\n            this.$container = $container;\n\n            this.criterium = this.$container.data('criterium').split(',');\n            this.target      = this.$container.data('target') ||\n                               '.tkt_program_event,.tkt_program_screening';\n            this.$filters = $('.tkt-filter', this.$container);\n        }\n\n        Filter.prototype = {\n            attach: function() {\n                this.init();\n            },\n\n            init: function() {\n                this.state = { filters: {}};\n                this.criterium.map((k) => {\n                    this.update_state(k, \"\");\n                });\n                this.$filters.click((e) => this.handle_click(e));\n\n                this.$filters.each((i, f) => {\n                    let criteria = $(f).data('criteria');\n                    let value    = $(f).data(criteria);\n                    console.log('value', value);\n                    if (!value)\n                        return;\n                    if ($(this.target + '[data-' + criteria + '*=\"' + value + '\"]').length == 0)\n                        $(f).remove();\n                });\n            },\n\n            handle_click: function (e) {\n                let $filter    = $(e.target);\n                if ($filter.parent('.tkt-filter').length) {\n                    $filter = $filter.parent('.tkt-filter');\n                }\n                let criteria = $filter.data('criteria');\n                let value    = $filter.data(criteria);\n\n                this.update_state(criteria, value);\n\n                this.sync_ui();\n            },\n\n            update_state: function (criteria, value) {\n                this.state.filters[criteria] = value;\n            },\n\n            sync_ui: function() {\n                $(this.target).addClass('to_show');\n                this.criterium.map((criteria) => {\n                    const value = this.state.filters[criteria];\n                    $('.tkt-filter[data-criteria=\"' + criteria + '\"]').not('[data-criteria=\"\"]').removeClass('active');\n                    $('.tkt-filter[data-criteria=\"' + criteria + '\"][data-' + criteria + '=\"' + value + '\"]').addClass('active');\n\n                    if (value)\n                        $(this.target).not('[data-' + criteria + '*=\"' + value + '\"]').removeClass('to_show');\n                });\n\n\n                $(this.target).hide();\n                $(this.target + '.to_show').fadeIn();\n            },\n\n            detach: function() {\n\n            }\n        };\n\n        return Filter;\n    });\n"]}