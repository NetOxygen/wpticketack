{"version":3,"sources":["app/Program/Filter.js"],"names":["define","dependencies","postal","$","_","_this2","Filter","$container","state","target","data","criteria","$filters","prototype","attach","init","_this","click","e","handle_click","each","i","f","value","length","remove","$filter","parent","removeClass","addClass","filter_on","not","fadeIn","hide","detach"],"mappings":"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","file":"app.js","sourcesContent":["/**\n * Handle program filters\n *\n * Usage:\n *\n * <div\n *    <!-- Required -->\n *    data-component=\"Program/Filter\"\n *\n *    <!-- Optional -->\n *    data-class=\"tkt_program_event\"\n *    data-criteria=\"type\"\n * >\n *   <ul>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *   </ul>\n * </div>\n */\ndefine(\n    ['postal', 'jquery', 'lodash', 'bootstrap'],\n    function dependencies(postal, $, _) {\n\n        function Filter($container, state) {\n            this.$container = $container;\n\n            this.target   = this.$container.data('target') || '.tkt_program_event';\n            this.criteria = this.$container.data('criteria') || 'type';\n            this.$filters = $('.tkt-filter', this.$container);\n        }\n\n        Filter.prototype = {\n            attach: function() {\n                this.init();\n            },\n\n            init: function() {\n                this.$filters.click((e) => this.handle_click(e));\n\n                this.$filters.each((i, f) => {\n                    let value = $(f).data(this.criteria);\n                    if (!value)\n                        return;\n                    if ($(this.target + '[data-' + this.criteria + '*=\"' + value + '\"]').length == 0)\n                        $(f).remove();\n                });\n            },\n\n            handle_click: function (e) {\n                let $filter = $(e.target);\n                if ($filter.parent('.tkt-filter').length) {\n                    $filter = $filter.parent('.tkt-filter');\n                }\n                let value = $filter.data(this.criteria);\n\n                $('.tkt-filter').removeClass('active');\n                $filter.addClass('active');\n\n                this.filter_on(this.target, this.criteria, value);\n            },\n\n            filter_on: (target, criteria, value) => {\n                if (!value)\n                    return $(this.target).not('[data-' + this.criteria + '*=\"' + value + '\"]').fadeIn();\n\n                $(target).not('[data-' + criteria + '*=\"' + value + '\"]').hide();\n                $(target + '[data-' + criteria + '*=\"' + value + '\"]').fadeIn();\n            },\n\n            detach: function() {\n\n            }\n        };\n\n        return Filter;\n    });\n"]}