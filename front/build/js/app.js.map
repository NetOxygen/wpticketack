{"version":3,"sources":["app/Core/State.js"],"names":["e","a","define","dependencies","STATE_KEY","arguments","Array","Object","prototype","toString","call","State","restore","localStorage","o","needs_to_read_from_storage","save","u","set","dottie","state","path","M","t","s","push","get","h","isArray","hasOwnProperty","L","valueOf"],"mappings":"CAAA,SAAAA,EAAAC,GACAC,iJADA,sCACuC,SAASC,IAEtCC,OAAAA,EAAAA,MAAY,KAAAC,WAF0BF,SAEtCC,EAAAA,GAFsE,OAAAJ,aAAAM,OAAA,mBAAAC,OAAAC,UAAAC,SAAAC,KAAAV,GAAA,SAQ5EW,EAAAA,GAAkB,OACdC,MAAAA,GAASC,oBAAWT,OAAXS,UADKJ,SAAAC,KAAAV,GAIV,SAAAc,EAAAd,GAJU,YAAA,IAAAe,EAR0D,SAkBvDC,EAEbhB,GAAOa,MAZG,iBAAAE,GAAAA,oBAYHF,OAAAA,UAAAA,SAAAA,KAAAA,GAAAA,SApB6DI,EAAAjB,GAuB7CkB,OAIvBC,aAAAA,MAAgBC,kBAAOC,OAAAA,UAAAA,SAAAA,KAAAA,GACvB,SAAAC,EAAAtB,EApBUqB,GAmBaA,IAKvBF,EAAAA,EAAID,GALmBG,IAKvBE,EACIP,EAAAA,EANmBK,EAAAA,SAAAA,EA3B6CG,EAAAC,KAAAxB,EAAAD,EAAAuB,GAAAA,IA+BrCG,OAO/BF,EAAA,SAAAG,EAAA3B,EAGAC,GAH+BoB,OAtCqCd,OAAAqB,UAAAC,eAAAnB,KAAAV,EAAAC,GAsCrCoB,SAA/BS,EAAA9B,EAAKmB,GAAL,IAAA,IACII,KAAAtB,EAEJ0B,EAAA1B,EAAAsB,KAAOJ,EAAOO,GAAIzB,EAAAsB,IAHaF,OAtCqCM,EAAA1B,EAAA,cAAAD,EAAAS,SAAAR,EAAAQ,UAAAkB,EAAA1B,EAAA,aAAAD,EAAA+B,QAAA9B,EAAA8B,SAAA/B,EA6C5E,SAAOW,EAAAA,EA7CqEV,EAAAsB,EAAAC,GAAhFtB,OAAAA,GAAAA,EAAAA,EAAAA,EAAAA,GAAAA,GAAAA","file":"app.js","sourcesContent":["// Application state abstraction, stored in LocalStorage\ndefine(['logger', 'lodash', 'dottie'], function dependencies(logger, _, dottie) {\n\n    const STATE_KEY = 'js_components_state';\n\n    function State() {\n        this.restore();\n    }\n\n    State.prototype = {\n        restore: function() {\n            this.state = localStorage.getItem(STATE_KEY) || {};\n\n            if (_.isString(this.state))\n                this.state = JSON.parse(this.state);\n\n            this.needs_to_read_from_storage = false;\n        },\n\n        save: function() {\n            this.needs_to_read_from_storage = true;\n            return localStorage.setItem(STATE_KEY, JSON.stringify(this.state));\n        },\n\n        set: function(path, value) {\n            if (_.isArray(path))\n                path = path.join('.');\n\n            dottie.set(this.state, path, value);\n            this.save();\n        },\n\n        get: function(path, default_value) {\n            if (this.needs_to_read_from_storage)\n                this.restore();\n\n            if (_.isArray(path))\n                path = path.join('.');\n\n            if (!dottie.exists(this.state, path))\n                return default_value;\n\n            return dottie.get(this.state, path);\n        }\n    }\n\n    return State;\n});\n"]}