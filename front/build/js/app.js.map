{"version":3,"sources":["app/Program/Filter.js"],"names":["e","a","define","dependencies","each","Filter","$container","Object","prototype","toString","call","criteria","$filters","attach","$filter","parent","u","target","Date","filter_on","t","s","value","$","_this2","length","push","not","h","valueOf","addClass","utc","_pf","empty","unusedTokens","detach","invalidFormat"],"mappings":"CAAA,SAAAA,EAAAC,GAuCoCC,iJAvCpC,mDAsC6B,OAGbC,EAAAA,MAAAA,KAAcC,WAAe,SAEzBC,EAAAA,GAAA,OAAAC,aAFyBA,OAEzB,mBAAAC,OAAAC,UAAAC,SAAAC,KAAAV,GAAA,SALSW,EAAAA,GALF,OAAAC,MAAAZ,GAAA,oBAAAM,OAAAE,UAUPC,SAAAC,KAAAV,GAOmBK,SAEvBG,EAAAA,GAA0CK,YAAAA,IACtCC,EAAUA,SADFC,EAAAA,GAMZD,MAAAA,iBAAiBd,GAAA,oBAAAO,OAAAC,UAAAC,SAAAC,KAAAV,GAAA,SAEjBgB,EAAAhB,GAAoBiB,OAAAA,aAAQC,MAAKP,kBAAbM,OAAAA,UAAAA,SAAAA,KAAAA,GAFH,SAKrBE,EAAAA,EAAWP,GAAA,IAAAQ,EAAAC,EACFC,GADE,IAAAF,EAEH,EAAOG,EAAEC,EAATC,SAAAL,EAAAC,EAAAK,KAAAzB,EAEM0B,EAAAA,GAJHP,IAAA,OAAAC,EAAA,SAAXF,EALqBnB,EAAAC,GAAA,OANLc,OAAAA,UAAAA,eAAAA,KAAAA,EAAAA,GA7BY,SAFxCb,EAAAA,EAAAA,GAEwC,IA6BxB,IAAIY,KAAAA,EAAsCc,EAAA3B,EACtCa,KAAAA,EAAUA,GAAAA,EAAAA,IAD4B,OA7BlBc,EAAA3B,EAAA,cAAAD,EAAAS,SAAAR,EAAAQ,UAAAmB,EAAA3B,EAAA,aAAAD,EAAA6B,QAAA5B,EAAA4B,SAAA7B,EAAA,SAkCxBuB,EAAEvB,EAAAC,EAAAmB,EAAAC,GAlCsB,OAmCxBP,GAAAA,EAAQgB,EAAAA,EAAAA,GAAS,GAAAC,MAnCO,SA6BZhB,EAAAA,GAWhBI,OAAAA,MAAWnB,EAAAgC,MAAAb,EAAAA,IAACF,CACRgB,OAAKX,EAALY,aACaV,GAEbD,YAAAA,GACAA,UAAW,EAhBCR,cAAAA,EAmBhBoB,WAAQ,EAnBQpB,aAAAA,KAXOqB,eAAA,EAmCpB/B,iBAnCoB,EAFCH,KAAAA","file":"app.js","sourcesContent":["/**\n * Handle program filters\n *\n * Usage:\n *\n * <div\n *    <!-- Required -->\n *    data-component=\"Program/Filter\"\n *\n *    <!-- Optional -->\n *    data-class=\"tkt_program_event\"\n *    data-criteria=\"type\"\n * >\n *   <ul>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *     <li class=\"tkt-filter>...</div>\n *   </ul>\n * </div>\n */\ndefine(\n    ['postal', 'jquery', 'lodash', 'bootstrap'],\n    function dependencies(postal, $, _) {\n\n        function Filter($container, state) {\n            this.$container = $container;\n\n            this.target   = this.$container.data('target') || '.tkt_program_event';\n            this.criteria = this.$container.data('criteria') || 'type';\n            this.$filters = $('.tkt-filter', this.$container);\n        }\n\n        Filter.prototype = {\n            attach: function() {\n                this.init();\n            },\n\n            init: function() {\n                this.$filters.click((e) => this.handle_click(e));\n\n                this.$filters.each((i, f) => {\n                    let value = $(f).data(this.criteria);\n                    if (!value)\n                        return;\n                    if ($(this.target + '[data-' + this.criteria + '*=\"' + value + '\"]').length == 0)\n                        $(f).remove();\n                });\n            },\n\n            handle_click: function (e) {\n                let $filter = $(e.target);\n                if ($filter.parent('.tkt-filter').length) {\n                    $filter = $filter.parent('.tkt-filter');\n                }\n                let value = $filter.data(this.criteria);\n\n                $('.tkt-filter').removeClass('active');\n                $filter.addClass('active');\n\n                this.filter_on(this.target, this.criteria, value);\n            },\n\n            filter_on: (target, criteria, value) => {\n                if (!value)\n                    return $(this.target).not('[data-' + this.criteria + '*=\"' + value + '\"]').fadeIn();\n\n                $(target).not('[data-' + criteria + '*=\"' + value + '\"]').hide();\n                $(target + '[data-' + criteria + '*=\"' + value + '\"]').fadeIn();\n            },\n\n            detach: function() {\n\n            }\n        };\n\n        return Filter;\n    });\n"]}